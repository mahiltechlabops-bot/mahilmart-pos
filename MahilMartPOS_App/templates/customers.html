{% extends "base.html" %}

{% block title %}Customer Details{% endblock %}

{% block content %}
<div class="container mt-5">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Customer Table Entries</h2>
    <a href="{% url 'add_customer' %}" class="btn btn-success">+ Add Customer</a>
  </div>

  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>S.No.</th>
        <th>Name</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Email</th>
        <th>Date Joined</th>
      </tr>
    </thead>
    <tbody>
      {% for c in customer_entries %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ c.name }}</td>
        <td>{{ c.phone }}</td>
        <td>{{ c.address|default:"-" }}</td>
        <td>{{ c.email|default:"-" }}</td>
        <td>{{ c.date_joined|date:"Y-m-d" }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="6">No customer records found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <hr class="my-5">

  <h2>Billing-Derived Customer Entries</h2>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>S.No.</th>
        <th>Name</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Email</th>
        <th>First Billing Date</th>
      </tr>
    </thead>
    <tbody>
      {% for b in billing_customers %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ b.name }}</td>
        <td>{{ b.phone }}</td>
        <td>{{ b.address|default:"-" }}</td>
        <td>{{ b.email|default:"-" }}</td>
        <td>{{ b.date_joined|date:"Y-m-d" }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="6">No billing records found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

</div>
{% endblock %}
